{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport * as React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport MapView, { PROVIDER_GOOGLE, Marker } from 'react-native-maps';\nimport * as Location from 'expo-location';\nimport styles from \"./styles\";\nimport { darkModeStyle } from \"../../../utils/googleMapStyle\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar SelectLocation = function SelectLocation() {\n  var _React$useState = React.useState({\n      longitude: 0,\n      latitude: 0,\n      longitudeDelta: 0.0022,\n      latitudeDelta: 0.0031\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    currentLocation = _React$useState2[0],\n    setCurrentLocation = _React$useState2[1];\n  var _React$useState3 = React.useState(),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    markerLocation = _React$useState4[0],\n    setMarkerLocation = _React$useState4[1];\n  var _initUserLocation = function _initUserLocation() {\n    var position, _position$coords, longitude, latitude;\n    return _regeneratorRuntime.async(function _initUserLocation$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n          case 3:\n            position = _context.sent;\n            _position$coords = position.coords, longitude = _position$coords.longitude, latitude = _position$coords.latitude;\n            setCurrentLocation(function (location) {\n              setMarkerLocation({\n                longitude: longitude,\n                latitude: latitude\n              });\n              return _objectSpread(_objectSpread({}, location), {}, {\n                longitude: longitude,\n                latitude: latitude\n              });\n            });\n            _context.next = 11;\n            break;\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            console.log('ðŸš€ ~ file: SelectLocation.tsx ~ line 52 ~ const_initUserLocation= ~ error', _context.t0);\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n  React.useEffect(function () {\n    var requestPermission = function requestPermission() {\n      var permission, res;\n      return _regeneratorRuntime.async(function requestPermission$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(Location.getForegroundPermissionsAsync());\n            case 2:\n              permission = _context2.sent;\n              if (!(permission.status !== Location.PermissionStatus.GRANTED)) {\n                _context2.next = 10;\n                break;\n              }\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(Location.requestForegroundPermissionsAsync());\n            case 6:\n              res = _context2.sent;\n              if (res.granted) {\n                _context2.next = 10;\n                break;\n              }\n              console.log('Location permission is not granted');\n              return _context2.abrupt(\"return\");\n            case 10:\n              _initUserLocation();\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n    requestPermission();\n    _initUserLocation();\n  }, []);\n  var _onMapViewPressed = function _onMapViewPressed(event) {\n    var _event$nativeEvent$co = event.nativeEvent.coordinate,\n      latitude = _event$nativeEvent$co.latitude,\n      longitude = _event$nativeEvent$co.longitude;\n    setMarkerLocation({\n      latitude: latitude,\n      longitude: longitude\n    });\n  };\n  var _onRegionChangeComplete = function _onRegionChangeComplete(region) {\n    setCurrentLocation(region);\n  };\n  var _onMarkerDragEd = function _onMarkerDragEd(event) {\n    setMarkerLocation(event.nativeEvent.coordinate);\n  };\n  return _jsx(View, {\n    style: styles.rootView,\n    children: _jsx(MapView, {\n      loadingEnabled: true,\n      cacheEnabled: true,\n      loadingIndicatorColor: \"black\",\n      loadingBackgroundColor: \"black\",\n      provider: PROVIDER_GOOGLE,\n      toolbarEnabled: true,\n      showsUserLocation: true,\n      showsMyLocationButton: true,\n      style: styles.mapView,\n      customMapStyle: darkModeStyle,\n      zoomControlEnabled: true,\n      onRegionChangeComplete: _onRegionChangeComplete,\n      region: currentLocation,\n      onPress: _onMapViewPressed,\n      children: markerLocation && _jsx(Marker, {\n        draggable: true,\n        coordinate: markerLocation,\n        onDragEnd: _onMarkerDragEd\n      })\n    })\n  });\n};\nexport default SelectLocation;","map":{"version":3,"names":["React","MapView","PROVIDER_GOOGLE","Marker","Location","styles","darkModeStyle","SelectLocation","useState","longitude","latitude","longitudeDelta","latitudeDelta","currentLocation","setCurrentLocation","markerLocation","setMarkerLocation","_initUserLocation","getCurrentPositionAsync","position","coords","location","console","log","useEffect","requestPermission","getForegroundPermissionsAsync","permission","status","PermissionStatus","GRANTED","requestForegroundPermissionsAsync","res","granted","_onMapViewPressed","event","nativeEvent","coordinate","_onRegionChangeComplete","region","_onMarkerDragEd","rootView","mapView"],"sources":["/Users/vunguyen/Documents/work/jcstudio/food-star-expo-app-template/src/components/screens/SelectLocation/SelectLocation.tsx"],"sourcesContent":["import * as React from 'react';\nimport {View} from 'react-native';\nimport MapView, {\n  PROVIDER_GOOGLE,\n  Marker,\n  LatLng,\n  MapEvent,\n  Region,\n} from 'react-native-maps';\n// import Geolocation from 'react-native-geolocation-service';\nimport * as Location from 'expo-location';\nimport styles from './styles';\nimport {darkModeStyle} from '@src/utils/googleMapStyle';\n\ntype SelectLocationProps = {};\n\nconst SelectLocation: React.FC<SelectLocationProps> = () => {\n  const [currentLocation, setCurrentLocation] = React.useState<Region>({\n    longitude: 0,\n    latitude: 0,\n    longitudeDelta: 0.0022,\n    latitudeDelta: 0.0031,\n  });\n  const [markerLocation, setMarkerLocation] = React.useState<LatLng>();\n\n  const _initUserLocation = async () => {\n    try {\n      let position = await Location.getCurrentPositionAsync({});\n      const {longitude, latitude} = position.coords;\n      setCurrentLocation((location) => {\n        setMarkerLocation({\n          longitude,\n          latitude,\n        });\n        return {\n          ...location,\n          longitude,\n          latitude,\n        };\n      });\n    } catch (error) {\n      console.log(\n        'ðŸš€ ~ file: SelectLocation.tsx ~ line 52 ~ const_initUserLocation= ~ error',\n        error,\n      );\n    }\n  };\n\n  React.useEffect(() => {\n    const requestPermission = async () => {\n      const permission = await Location.getForegroundPermissionsAsync();\n\n      if (permission.status !== Location.PermissionStatus.GRANTED) {\n        const res = await Location.requestForegroundPermissionsAsync();\n        if (!res.granted) {\n          console.log('Location permission is not granted');\n          return;\n        }\n      }\n\n      _initUserLocation();\n    };\n\n    requestPermission();\n    _initUserLocation();\n  }, []);\n\n  const _onMapViewPressed = (event: MapEvent) => {\n    const {\n      nativeEvent: {\n        coordinate: {latitude, longitude},\n      },\n    } = event;\n\n    setMarkerLocation({\n      latitude,\n      longitude,\n    });\n  };\n\n  const _onRegionChangeComplete = (region: Region) => {\n    setCurrentLocation(region);\n  };\n\n  const _onMarkerDragEd = (event: MapEvent) => {\n    setMarkerLocation(event.nativeEvent.coordinate);\n  };\n\n  return (\n    <View style={styles.rootView}>\n      <MapView\n        loadingEnabled\n        cacheEnabled\n        loadingIndicatorColor=\"black\"\n        loadingBackgroundColor=\"black\"\n        provider={PROVIDER_GOOGLE}\n        toolbarEnabled\n        showsUserLocation\n        showsMyLocationButton\n        style={styles.mapView}\n        customMapStyle={darkModeStyle}\n        zoomControlEnabled\n        onRegionChangeComplete={_onRegionChangeComplete}\n        region={currentLocation}\n        onPress={_onMapViewPressed}>\n        {markerLocation && (\n          <Marker\n            draggable\n            coordinate={markerLocation}\n            onDragEnd={_onMarkerDragEd}\n          />\n        )}\n      </MapView>\n    </View>\n  );\n};\n\nexport default SelectLocation;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}