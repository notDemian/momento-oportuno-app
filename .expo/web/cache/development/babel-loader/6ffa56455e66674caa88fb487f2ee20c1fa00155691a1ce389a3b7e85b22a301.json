{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseLayout = void 0;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _reactNativeReanimated = _interopRequireWildcard(require(\"react-native-reanimated\"));\nvar _useCheckMounted = require(\"../hooks/useCheckMounted\");\nvar _useOffsetX = require(\"../hooks/useOffsetX\");\nvar _LazyView = require(\"../LazyView\");\nvar _store = require(\"../store\");\nvar _this = this,\n  _jsxFileName = \"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx\";\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nvar BaseLayout = function BaseLayout(props) {\n  var mounted = (0, _useCheckMounted.useCheckMounted)();\n  var handlerOffset = props.handlerOffset,\n    index = props.index,\n    children = props.children,\n    visibleRanges = props.visibleRanges,\n    animationStyle = props.animationStyle;\n  var context = _react.default.useContext(_store.CTX);\n  var _context$props = context.props,\n    loop = _context$props.loop,\n    dataLength = _context$props.dataLength,\n    width = _context$props.width,\n    height = _context$props.height,\n    vertical = _context$props.vertical,\n    customConfig = _context$props.customConfig,\n    mode = _context$props.mode,\n    modeConfig = _context$props.modeConfig;\n  var size = vertical ? height : width;\n  var _React$useState = _react.default.useState(false),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    shouldUpdate = _React$useState2[0],\n    setShouldUpdate = _React$useState2[1];\n  var offsetXConfig = _objectSpread({\n    handlerOffset: handlerOffset,\n    index: index,\n    size: size,\n    dataLength: dataLength,\n    loop: loop\n  }, typeof customConfig === \"function\" ? customConfig() : {});\n  if (mode === \"horizontal-stack\") {\n    var _ref = modeConfig,\n      snapDirection = _ref.snapDirection,\n      showLength = _ref.showLength;\n    offsetXConfig = {\n      handlerOffset: handlerOffset,\n      index: index,\n      size: size,\n      dataLength: dataLength,\n      loop: loop,\n      type: snapDirection === \"right\" ? \"negative\" : \"positive\",\n      viewCount: showLength\n    };\n  }\n  var x = (0, _useOffsetX.useOffsetX)(offsetXConfig, visibleRanges);\n  var animationValue = (0, _reactNativeReanimated.useDerivedValue)(function () {\n    var _f = function _f() {\n      return x.value / size;\n    };\n    _f._closure = {\n      x: x,\n      size: size\n    };\n    _f.asString = \"function _f(){const{x,size}=jsThis._closure;{return x.value/size;}}\";\n    _f.__workletHash = 9077192607952;\n    _f.__location = \"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx (74:41)\";\n    return _f;\n  }(), [x, size]);\n  var animatedStyle = (0, _reactNativeReanimated.useAnimatedStyle)(function () {\n    var _f = function _f() {\n      return animationStyle(x.value / size);\n    };\n    _f._closure = {\n      animationStyle: animationStyle,\n      x: x,\n      size: size\n    };\n    _f.asString = \"function _f(){const{animationStyle,x,size}=jsThis._closure;{return animationStyle(x.value/size);}}\";\n    _f.__workletHash = 3916054905053;\n    _f.__location = \"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx (76:4)\";\n    _f.__optimalization = 2;\n    return _f;\n  }(), [animationStyle]);\n  var updateView = _react.default.useCallback(function (negativeRange, positiveRange) {\n    mounted.current && setShouldUpdate(index >= negativeRange[0] && index <= negativeRange[1] || index >= positiveRange[0] && index <= positiveRange[1]);\n  }, [index, mounted]);\n  (0, _reactNativeReanimated.useAnimatedReaction)(function () {\n    var _f = function _f() {\n      return visibleRanges.value;\n    };\n    _f._closure = {\n      visibleRanges: visibleRanges\n    };\n    _f.asString = \"function _f(){const{visibleRanges}=jsThis._closure;{return visibleRanges.value;}}\";\n    _f.__workletHash = 15231519758579;\n    _f.__location = \"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx (92:4)\";\n    return _f;\n  }(), function () {\n    var _f = function _f() {\n      (0, _reactNativeReanimated.runOnJS)(updateView)(visibleRanges.value.negativeRange, visibleRanges.value.positiveRange);\n    };\n    _f._closure = {\n      runOnJS: _reactNativeReanimated.runOnJS,\n      updateView: updateView,\n      visibleRanges: visibleRanges\n    };\n    _f.asString = \"function _f(){const{runOnJS,updateView,visibleRanges}=jsThis._closure;{runOnJS(updateView)(visibleRanges.value.negativeRange,visibleRanges.value.positiveRange);}}\";\n    _f.__workletHash = 6352504350554;\n    _f.__location = \"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx (93:4)\";\n    return _f;\n  }(), [visibleRanges.value]);\n  return _react.default.createElement(_reactNativeReanimated.default.View, {\n    style: [{\n      width: width || \"100%\",\n      height: height || \"100%\",\n      position: \"absolute\"\n    }, animatedStyle],\n    testID: \"__CAROUSEL_ITEM_\" + index + \"_\" + (shouldUpdate ? \"READY\" : \"NOT_READY\") + \"__\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_LazyView.LazyView, {\n    shouldUpdate: shouldUpdate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, children({\n    animationValue: animationValue\n  })));\n};\nexports.BaseLayout = BaseLayout;","map":{"version":3,"names":["_react","_interopRequireDefault","require","_reactNativeReanimated","_interopRequireWildcard","_useCheckMounted","_useOffsetX","_LazyView","_store","BaseLayout","props","mounted","useCheckMounted","handlerOffset","index","children","visibleRanges","animationStyle","context","default","useContext","CTX","_context$props","loop","dataLength","width","height","vertical","customConfig","mode","modeConfig","size","_React$useState","useState","_React$useState2","_slicedToArray2","shouldUpdate","setShouldUpdate","offsetXConfig","_objectSpread","_ref","snapDirection","showLength","type","viewCount","x","useOffsetX","animationValue","useDerivedValue","_f","value","_closure","asString","__workletHash","__location","animatedStyle","useAnimatedStyle","__optimalization","updateView","useCallback","negativeRange","positiveRange","current","useAnimatedReaction","runOnJS","createElement","View","style","position","testID","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","LazyView"],"sources":["/Users/vunguyen/Documents/work/jcstudio/food-star-expo-app-template/node_modules/react-native-reanimated-carousel/lib/commonjs/layouts/BaseLayout.tsx"],"sourcesContent":["import React from \"react\";\nimport type { ViewStyle } from \"react-native\";\nimport type { AnimatedStyleProp } from \"react-native-reanimated\";\nimport Animated, {\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedStyle,\n  useDerivedValue,\n} from \"react-native-reanimated\";\n\nimport type { ILayoutConfig } from \"./stack\";\n\nimport { useCheckMounted } from \"../hooks/useCheckMounted\";\nimport type { IOpts } from \"../hooks/useOffsetX\";\nimport { useOffsetX } from \"../hooks/useOffsetX\";\nimport type { IVisibleRanges } from \"../hooks/useVisibleRanges\";\nimport { LazyView } from \"../LazyView\";\nimport { CTX } from \"../store\";\n\nexport type TAnimationStyle = (value: number) => AnimatedStyleProp<ViewStyle>;\n\nexport const BaseLayout: React.FC<{\n  index: number\n  handlerOffset: Animated.SharedValue<number>\n  visibleRanges: IVisibleRanges\n  animationStyle: TAnimationStyle\n  children: (ctx: {\n    animationValue: Animated.SharedValue<number>\n  }) => React.ReactElement\n}> = (props) => {\n  const mounted = useCheckMounted();\n  const { handlerOffset, index, children, visibleRanges, animationStyle }\n  = props;\n\n  const context = React.useContext(CTX);\n  const {\n    props: {\n      loop,\n      dataLength,\n      width,\n      height,\n      vertical,\n      customConfig,\n      mode,\n      modeConfig,\n    },\n  } = context;\n  const size = vertical ? height : width;\n  const [shouldUpdate, setShouldUpdate] = React.useState(false);\n  let offsetXConfig: IOpts = {\n    handlerOffset,\n    index,\n    size,\n    dataLength,\n    loop,\n    ...(typeof customConfig === \"function\" ? customConfig() : {}),\n  };\n\n  if (mode === \"horizontal-stack\") {\n    const { snapDirection, showLength } = modeConfig as ILayoutConfig;\n\n    offsetXConfig = {\n      handlerOffset,\n      index,\n      size,\n      dataLength,\n      loop,\n      type: snapDirection === \"right\" ? \"negative\" : \"positive\",\n      viewCount: showLength,\n    };\n  }\n\n  const x = useOffsetX(offsetXConfig, visibleRanges);\n  const animationValue = useDerivedValue(() => x.value / size, [x, size]);\n  const animatedStyle = useAnimatedStyle(\n    () => animationStyle(x.value / size),\n    [animationStyle],\n  );\n\n  const updateView = React.useCallback(\n    (negativeRange: number[], positiveRange: number[]) => {\n      mounted.current\n                && setShouldUpdate(\n                  (index >= negativeRange[0] && index <= negativeRange[1])\n                        || (index >= positiveRange[0] && index <= positiveRange[1]),\n                );\n    },\n    [index, mounted],\n  );\n\n  useAnimatedReaction(\n    () => visibleRanges.value,\n    () => {\n      runOnJS(updateView)(\n        visibleRanges.value.negativeRange,\n        visibleRanges.value.positiveRange,\n      );\n    },\n    [visibleRanges.value],\n  );\n\n  return (\n    <Animated.View\n      style={[\n        {\n          width: width || \"100%\",\n          height: height || \"100%\",\n          position: \"absolute\",\n        },\n        animatedStyle,\n      ]}\n      /**\n       * We use this testID to know when the carousel item is ready to be tested in test.\n       * e.g.\n       *  The testID of first item will be changed to __CAROUSEL_ITEM_0_READY__ from __CAROUSEL_ITEM_0_NOT_READY__ when the item is ready.\n       * */\n      testID={`__CAROUSEL_ITEM_${index}_${shouldUpdate ? \"READY\" : \"NOT_READY\"}__`}\n    >\n      <LazyView shouldUpdate={shouldUpdate}>\n        {children({ animationValue })}\n      </LazyView>\n    </Animated.View>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}