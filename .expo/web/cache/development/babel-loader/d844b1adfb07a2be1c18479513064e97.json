{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport * as React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Touchable from \"../Touchable\";\nvar WindowWidth = Dimensions.get('window').width;\nimport styles from \"./styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar TabBar = function (_React$PureComponent) {\n  _inherits(TabBar, _React$PureComponent);\n  var _super = _createSuper(TabBar);\n  function TabBar() {\n    var _this;\n    _classCallCheck(this, TabBar);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.scrollView = React.createRef();\n    _this._tabsMeasurements = {};\n    _this.getScrollAmount = function () {\n      var currentIndex = _this.props.currentIndex;\n      var position = currentIndex;\n      var pageOffset = 0;\n      var containerWidth = WindowWidth;\n      var tabWidth = _this._tabsMeasurements[position].width;\n      var nextTabMeasurements = _this._tabsMeasurements[position + 1];\n      var nextTabWidth = nextTabMeasurements && nextTabMeasurements.width || 0;\n      var tabOffset = _this._tabsMeasurements[position].left;\n      var absolutePageOffset = pageOffset * tabWidth;\n      var newScrollX = tabOffset + absolutePageOffset;\n      newScrollX -= (containerWidth - (1 - pageOffset) * tabWidth - pageOffset * nextTabWidth) / 2;\n      newScrollX = newScrollX >= 0 ? newScrollX : 0;\n      var rightBoundScroll = Math.max(_this._tabContainerMeasurements.width - containerWidth, 0);\n      newScrollX = newScrollX > rightBoundScroll ? rightBoundScroll : newScrollX;\n      return newScrollX;\n    };\n    _this.onTabContainerLayout = function (e) {\n      _this._tabContainerMeasurements = e.nativeEvent.layout;\n    };\n    _this.onTabLayout = function (key) {\n      return function (ev) {\n        var _ev$nativeEvent$layou = ev.nativeEvent.layout,\n          x = _ev$nativeEvent$layou.x,\n          width = _ev$nativeEvent$layou.width,\n          height = _ev$nativeEvent$layou.height;\n        _this._tabsMeasurements[key] = {\n          left: x,\n          right: x + width,\n          width: width,\n          height: height\n        };\n      };\n    };\n    _this.renderTab = function (section, key) {\n      var _this$props = _this.props,\n        renderTab = _this$props.renderTab,\n        _onPress = _this$props.onPress,\n        currentIndex = _this$props.currentIndex;\n      var isActive = currentIndex === key;\n      return _jsx(Touchable, {\n        onPress: function onPress() {\n          return _onPress(key);\n        },\n        onLayout: _this.onTabLayout(key),\n        children: renderTab(_objectSpread({\n          isActive: isActive\n        }, section))\n      }, key);\n    };\n    return _this;\n  }\n  _createClass(TabBar, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.currentIndex !== prevProps.currentIndex) {\n        if (this.scrollView.current) {\n          this.scrollView.current.scrollTo({\n            x: this.getScrollAmount(),\n            animated: true\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n        sections = _this$props2.sections,\n        tabBarStyle = _this$props2.tabBarStyle,\n        tabBarScrollViewStyle = _this$props2.tabBarScrollViewStyle;\n      return _jsx(Animated.View, {\n        style: [{\n          width: WindowWidth\n        }, tabBarStyle],\n        children: _jsx(ScrollView, {\n          ref: this.scrollView,\n          showsHorizontalScrollIndicator: false,\n          horizontal: true,\n          style: tabBarScrollViewStyle,\n          contentContainerStyle: styles.tabBarScrollviewContainer,\n          children: _jsx(View, {\n            onLayout: this.onTabContainerLayout,\n            style: styles.tabBarContainer,\n            children: sections.map(this.renderTab)\n          })\n        })\n      });\n    }\n  }]);\n  return TabBar;\n}(React.PureComponent);\nexport { TabBar as default };","map":{"version":3,"names":["React","Touchable","WindowWidth","Dimensions","get","width","styles","TabBar","scrollView","createRef","_tabsMeasurements","getScrollAmount","currentIndex","props","position","pageOffset","containerWidth","tabWidth","nextTabMeasurements","nextTabWidth","tabOffset","left","absolutePageOffset","newScrollX","rightBoundScroll","Math","max","_tabContainerMeasurements","onTabContainerLayout","e","nativeEvent","layout","onTabLayout","key","ev","x","height","right","renderTab","section","onPress","isActive","prevProps","current","scrollTo","animated","sections","tabBarStyle","tabBarScrollViewStyle","tabBarScrollviewContainer","tabBarContainer","map","PureComponent"],"sources":["/Users/vunguyen/Documents/work/jcstudio/food-star-expo-app-template/src/components/elements/TabSectionList/TabBar.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  View,\n  Dimensions,\n  ScrollView,\n  LayoutChangeEvent,\n  LayoutRectangle,\n  SectionListData,\n  ViewStyle,\n  Animated,\n  StyleProp,\n} from 'react-native';\nimport Touchable from '../Touchable';\nconst WindowWidth = Dimensions.get('window').width;\nimport styles from './styles';\n\ninterface IProps {\n  sections: SectionListData<any>[];\n  renderTab: (section: SectionListData<any>) => React.ReactNode;\n  tabBarStyle?: Animated.WithAnimatedValue<StyleProp<ViewStyle>>;\n  tabBarScrollViewStyle?: StyleProp<ViewStyle>;\n  currentIndex: number;\n  onPress: (index: number) => void;\n}\n\ninterface ITabMeasurements {\n  left: number;\n  right: number;\n  width: number;\n  height: number;\n}\n\ninterface ITabsLayoutRectangle {\n  [index: number]: ITabMeasurements;\n}\n\nexport default class TabBar extends React.PureComponent<IProps, any> {\n  private scrollView: React.RefObject<ScrollView> = React.createRef();\n  private _tabContainerMeasurements!: LayoutRectangle;\n  private _tabsMeasurements: ITabsLayoutRectangle = {};\n\n  componentDidUpdate(prevProps: IProps) {\n    if (this.props.currentIndex !== prevProps.currentIndex) {\n      if (this.scrollView.current) {\n        this.scrollView.current.scrollTo({\n          x: this.getScrollAmount(),\n          animated: true,\n        });\n      }\n    }\n  }\n\n  getScrollAmount = () => {\n    const {currentIndex} = this.props;\n    const position = currentIndex;\n    const pageOffset = 0;\n\n    const containerWidth = WindowWidth;\n    const tabWidth = this._tabsMeasurements[position].width;\n    const nextTabMeasurements = this._tabsMeasurements[position + 1];\n    const nextTabWidth =\n      (nextTabMeasurements && nextTabMeasurements.width) || 0;\n    const tabOffset = this._tabsMeasurements[position].left;\n    const absolutePageOffset = pageOffset * tabWidth;\n    let newScrollX = tabOffset + absolutePageOffset;\n\n    newScrollX -=\n      (containerWidth -\n        (1 - pageOffset) * tabWidth -\n        pageOffset * nextTabWidth) /\n      2;\n    newScrollX = newScrollX >= 0 ? newScrollX : 0;\n\n    const rightBoundScroll = Math.max(\n      this._tabContainerMeasurements.width - containerWidth,\n      0,\n    );\n\n    newScrollX = newScrollX > rightBoundScroll ? rightBoundScroll : newScrollX;\n    return newScrollX;\n  };\n\n  onTabContainerLayout = (e: LayoutChangeEvent) => {\n    this._tabContainerMeasurements = e.nativeEvent.layout;\n  };\n\n  onTabLayout = (key: number) => (ev: LayoutChangeEvent) => {\n    const {x, width, height} = ev.nativeEvent.layout;\n    this._tabsMeasurements[key] = {\n      left: x,\n      right: x + width,\n      width,\n      height,\n    };\n  };\n\n  renderTab = (section: SectionListData<any>, key: number) => {\n    const {renderTab, onPress, currentIndex} = this.props;\n    const isActive: boolean = currentIndex === key;\n\n    return (\n      <Touchable\n        onPress={() => onPress(key)}\n        key={key}\n        onLayout={this.onTabLayout(key)}>\n        {renderTab({isActive, ...section})}\n      </Touchable>\n    );\n  };\n\n  render() {\n    const {sections, tabBarStyle, tabBarScrollViewStyle} = this.props;\n\n    return (\n      <Animated.View style={[{width: WindowWidth}, tabBarStyle]}>\n        <ScrollView\n          ref={this.scrollView}\n          showsHorizontalScrollIndicator={false}\n          horizontal\n          style={tabBarScrollViewStyle}\n          contentContainerStyle={styles.tabBarScrollviewContainer}>\n          <View\n            onLayout={this.onTabContainerLayout}\n            style={styles.tabBarContainer}>\n            {sections.map(this.renderTab)}\n          </View>\n        </ScrollView>\n      </Animated.View>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}